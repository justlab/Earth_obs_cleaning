---
title: "Initial CV Report"
output: html_document
params:
  cv_names: none
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r basics, echo=FALSE}
source('R/functions.R')
library(targets)
```

```{r get_results, echo=FALSE}
output = list()
for(t in params$cv_names){
  cv = tar_read_raw(t)
  stats = cv_reporting(cv)
  stats$sat <- str_extract(t, 'terra|aqua')
  stats$year <- substr(t, 12, 15)
  output[[t]] <- stats
}
```

```{r table_cv_results, echo=FALSE}
outDT = rbindlist(lapply(output, as.data.table))
setkey(outDT, sat, year)
setcolorder(outDT)
knitr::kable(outDT)
```

